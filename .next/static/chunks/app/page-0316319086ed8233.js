(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6380:function(e,t,n){Promise.resolve().then(n.bind(n,1570)),Promise.resolve().then(n.bind(n,8898))},1570:function(e,t,n){"use strict";n.d(t,{DemoContainer:function(){return s}});var r=n(7437),a=n(9354);function s(e){let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,a.cn)("flex w-full items-center justify-center",t),...n})}},8898:function(e,t,n){"use strict";n.d(t,{LoginForm:function(){return h}});var r=n(7437),a=n(9733),s=n(8185),o=n(402),i=n(2265),u=n(9354);let l=i.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("textarea",{className:(0,u.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...a})});l.displayName="Textarea";let d=(0,n(8030).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var c=n(8410),f=n(6763),p=n(9986),m=n(6463);function h(){let e=(0,m.useRouter)(),[t,n]=(0,i.useState)(""),[h,v]=(0,i.useState)(null),[g,x]=(0,i.useState)(""),[b,w]=(0,i.useState)(!1),y=async()=>{if(w(!0),/https?:\/\/[^\s/$.?#].[^\s]*\b/.test(t)){let e=encodeURI(decodeURI(new URL(t).hash).replace("#tgWebAppData=","")).split("&tgWebAppVersion=")[0],n=(0,c.gR)(e);"string"!=typeof n&&(null==n?void 0:n.id)&&(x(e),v(n),w(!1))}if(g&&h){let t=await fetch("./api/auth",{method:"POST",headers:{"init-data":g}});if(t.ok){var n,r,a,s;let o=await t.json();if((null==o?void 0:null===(n=o.token)||void 0===n?void 0:n.access)&&(null==o?void 0:null===(r=o.token)||void 0===r?void 0:r.refresh)){let e={accessToken:null==o?void 0:null===(a=o.token)||void 0===a?void 0:a.access,refreshToken:null==o?void 0:null===(s=o.token)||void 0===s?void 0:s.refresh};p.Ju.setItem(h.id.toString(),e).then(()=>{(0,f.Am)({title:"\uD83D\uDE32 Yes!",description:"\uD83D\uDC4D Welcome, ".concat(h.first_name,"!")})}).catch(()=>{(0,f.Am)({title:"\uD83D\uDE32 Yes!",description:"\uD83D\uDC4D Welcome, ".concat(h.first_name,"!")})})}p.eH.setItem(h.id.toString(),g),e.push("./playground?id=".concat(h.id))}else(0,f.Am)({title:"\uD83D\uDE42‍↔️ Nope!",description:"⛔ Invalid telegram data."})}else(0,f.Am)({title:"\uD83D\uDE42‍↔️ Nope!",description:"\uD83D\uDE42‍ Please enter a valid data.",variant:"destructive"});await (0,u._v)(1),w(!1)};return(0,r.jsxs)(s.Zb,{className:"w-full max-w-sm",children:[(0,r.jsxs)(s.Ol,{children:[(0,r.jsx)(s.ll,{className:"text-2xl",children:"Account"}),(0,r.jsx)(s.SZ,{children:"Paste your telegram webapp data from bot."})]}),(0,r.jsx)(s.aY,{className:"grid gap-4",children:(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(o._,{htmlFor:"webappdata",children:"Webapp Data"}),(0,r.jsx)(l,{rows:9,defaultValue:t,onChange:e=>n(e.target.value),className:"resize-none",readOnly:b,id:"webappdata",maxLength:2e3,minLength:500,placeholder:"Paste webapp data here"})]})}),(0,r.jsx)(s.eW,{children:(0,r.jsx)(a.z,{disabled:b||!t||t.length<500||t.length>2e3,onClick:y,type:"button",className:(0,u.cn)("w-full py-4 font-bold",b&&"cursor-wait"),children:b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d,{className:"mr-2 h-5 w-5 animate-spin"})," Loading"]}):"Load Account"})})]})}},9986:function(e,t,n){"use strict";n.d(t,{Ju:function(){return o},eH:function(){return s},ix:function(){return u},uk:function(){return i}});var r=n(3031),a=n.n(r);let s=a().createInstance({name:"profiles"}),o=a().createInstance({name:"gameSessions"}),i=a().createInstance({name:"gameConfig"});async function u(e){let t=[];try{return await e.iterate(e=>{t.push(e)}),t}catch(e){return console.error("Error getting all values:",e),[]}}},9733:function(e,t,n){"use strict";n.d(t,{d:function(){return u},z:function(){return l}});var r=n(7437),a=n(2265),s=n(1538),o=n(2218),i=n(9354);let u=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:n,variant:a,size:o,asChild:l=!1,...d}=e,c=l?s.g7:"button";return(0,r.jsx)(c,{className:(0,i.cn)(u({variant:a,size:o,className:n})),ref:t,...d})});l.displayName="Button"},8185:function(e,t,n){"use strict";n.d(t,{Ol:function(){return i},SZ:function(){return l},Zb:function(){return o},aY:function(){return d},eW:function(){return c},ll:function(){return u}});var r=n(7437),a=n(2265),s=n(9354);let o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",n),...a})});o.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",n),...a})});i.displayName="CardHeader";let u=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,s.cn)("font-semibold leading-none tracking-tight",n),...a})});u.displayName="CardTitle";let l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",n),...a})});l.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",n),...a})});d.displayName="CardContent";let c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",n),...a})});c.displayName="CardFooter"},402:function(e,t,n){"use strict";n.d(t,{_:function(){return l}});var r=n(7437),a=n(2265),s=n(8364),o=n(2218),i=n(9354);let u=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.f,{ref:t,className:(0,i.cn)(u(),n),...a})});l.displayName=s.f.displayName},6763:function(e,t,n){"use strict";n.d(t,{Am:function(){return c},pm:function(){return f}});var r=n(2265);let a=0,s=new Map,o=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?o(n):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},u=[],l={toasts:[]};function d(e){l=i(l,e),u.forEach(e=>{e(l)})}function c(e){let{...t}=e,n=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:n});return d({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||r()}}}),{id:n,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function f(){let[e,t]=r.useState(l);return r.useEffect(()=>(u.push(t),()=>{let e=u.indexOf(t);e>-1&&u.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},8410:function(e,t,n){"use strict";function r(e){let t=decodeURIComponent(e);return t.includes("&user=")||t.includes("user=")?JSON.parse((t.includes("&user=")?t.split("&user=")[1].split("}&")[0]:t.split("user=")[1].split("}&")[0])+"}"):"Invalid auth string"}n.d(t,{gR:function(){return r}})},9354:function(e,t,n){"use strict";n.d(t,{Au:function(){return u},Kd:function(){return i},_v:function(){return o},cn:function(){return s}});var r=n(4839),a=n(6164);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,r.W)(t))}function o(e){return new Promise(t=>setTimeout(t,1e3*e))}function i(e,t){return Math.floor(Math.random()*(t-e+1))+e}function u(e){return e.replace(/[^\x00-\x7F]/g,"")}},8364:function(e,t,n){"use strict";n.d(t,{_:function(){return o},f:function(){return i}});var r=n(2265),a=n(5171),s=n(7437),o=r.forwardRef((e,t)=>(0,s.jsx)(a.WV.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";var i=o}},function(e){e.O(0,[934,971,23,744],function(){return e(e.s=6380)}),_N_E=e.O()}]);